<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Catalog - Robotics Lab</title>
<meta name="description" content="Complete catalog of robotics projects and kits." />
<meta name="author" content="Ricardo Sanjines" />
<link rel="icon" href="img/2.jpg" />
<link rel="stylesheet" href="styles.css" />
<style>
  /* Styles for catalog cards */
  .grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 1.5rem;
  }
  .card {
    background: white;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgb(0 0 0 / 0.1);
    padding: 1rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
  }
  .card img {
    max-width: 100%;
    height: auto;
    border-radius: 6px;
    margin-bottom: 0.75rem;
  }
  .card h4 {
    margin: 0.25rem 0;
    font-size: 1.1rem;
    color: #0057b7;
  }
  .card p {
    margin: 0.25rem 0;
    font-size: 0.9rem;
    color: #444;
  }
  .card p em {
    font-size: 0.85rem;
    color: #777;
  }
  .card p strong {
    color: #222;
    font-weight: 700;
    margin-top: 0.5rem;
  }
  .card .actions {
    margin-top: 1rem;
    display: flex;
    gap: 1rem;
  }
  .card button {
    background: #0057b7;
    border: none;
    color: white;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
    transition: background-color 0.3s ease;
  }
  .card button:hover {
    background: #003f8a;
  }

  /* Modal styles */
  #modal-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    right:0;
    bottom:0;
    background: rgba(0,0,0,0.5);
    display: none;
    justify-content: center;
    align-items: center;
    z-index: 9999;
  }
  #modal-content {
    background: white;
    border-radius: 8px;
    max-width: 400px;
    width: 90%;
    padding: 1.5rem;
    position: relative;
    box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  }
  #modal-close {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background: transparent;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: #555;
  }
  #modal-content h3 {
    margin-top: 0;
    color: #0057b7;
  }
  #modal-content p {
    color: #333;
  }
  #modal-content button.reserve-btn,
  #modal-content button.send-btn {
    background: #0057b7;
    color: white;
    border: none;
    padding: 0.5rem 1.2rem;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 700;
    margin-top: 1rem;
    transition: background-color 0.3s ease;
  }
  #modal-content button.reserve-btn:hover,
  #modal-content button.send-btn:hover {
    background: #003f8a;
  }

  /* Reservation form styles */
  #reservation-form {
    display: none;
    margin-top: 1rem;
    text-align: left;
  }
  #reservation-form label {
    display: block;
    margin-top: 0.75rem;
    font-weight: 600;
    color: #0057b7;
  }
  #reservation-form input,
  #reservation-form textarea {
    width: 100%;
    padding: 0.4rem 0.5rem;
    border: 1px solid #ccc;
    border-radius: 4px;
    margin-top: 0.25rem;
    font-size: 0.9rem;
    font-family: inherit;
    resize: vertical;
  }
  #reservation-form textarea {
    min-height: 60px;
  }
  #form-message {
    margin-top: 0.75rem;
    color: green;
    font-weight: 700;
  }
  #form-error {
    margin-top: 0.75rem;
    color: red;
    font-weight: 700;
  }
</style>
</head>
<body>
<header class="container header" role="banner">
  <div class="brand">
    <img src="img/2.jpg" alt="catalog logo" width="64" height="64" fetchpriority="high" loading="eager" />
    <div><h1>Catalog</h1></div>
  </div>
  <div>
    <button class="hamburger" aria-expanded="false" aria-controls="site-nav">☰</button>
    <nav id="site-nav" role="navigation" aria-label="Main">
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="catalogo.html">Catalog</a></li>
        <li><a href="contacto.html">Request Project</a></li>
      </ul>
    </nav>
  </div>
</header>

<main class="container">
  <section class="controls">
    <label for="filter">Filter by category:</label>
    <select id="filter">
      <option value="all" selected>All</option>
    </select>
    <button id="clear-favs" class="filter">Clear favorites</button>
  </section>

  <section>
    <h2>Full Catalog</h2>
    <div id="catalogo-grid" class="grid">
      <div class="card" data-info="4-axis robotic arm, structure made of laser-cut acrylic. Price: $350" data-name="Acrylic Robotic Arm with Arduino UNO">
        <img src="img/1.jpg" alt="Acrylic Robotic Arm with Arduino UNO" loading="lazy" width="300" height="200" />
        <h4>Acrylic Robotic Arm with Arduino UNO</h4>
        <p><em>Robotic Arms · Arduino UNO</em></p>
        <p>4-axis robotic arm, structure made of laser-cut acrylic.</p>
        <p><strong>$350</strong></p>
        <div class="actions">
          <button type="button" class="info-btn" aria-label="More info about Acrylic Robotic Arm with Arduino UNO">Info</button>
          <button type="button" class="reserve-btn">Reserve</button>
        </div>
      </div>

      <div class="card" data-info="Mini Robotic Arm - 3 axes designed for education and prototyping. Price: $280" data-name="Mini Robotic Arm - 3 axes">
        <img src="img/2.jpg" alt="Mini Robotic Arm - 3 axes" loading="lazy" width="300" height="200" />
        <h4>Mini Robotic Arm - 3 axes</h4>
        <p><em>Robotic Arms · ESP32</em></p>
        <p>Mini Robotic Arm - 3 axes designed for education and prototyping.</p>
        <p><strong>$280</strong></p>
        <div class="actions">
          <button type="button" class="info-btn" aria-label="More info about Mini Robotic Arm - 3 axes">Info</button>
          <button type="button" class="reserve-btn">Reserve</button>
        </div>
      </div>
      <!-- Add more cards as needed -->
    </div>
  </section>
</main>

<!-- Modal -->
<div id="modal-backdrop" aria-hidden="true">
  <div id="modal-content" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <button id="modal-close" aria-label="Close modal">×</button>
    <h3 id="modal-title">Product Information</h3>
    <p id="modal-text"></p>

    <button id="modal-reserve-btn" class="reserve-btn">Reserve This Product</button>

    <!-- Reservation form -->
    <form id="reservation-form" novalidate>
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" required />

      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required />

      <label for="comments">Comments (optional):</label>
      <textarea id="comments" name="comments" placeholder="Any questions or details..."></textarea>

      <button type="submit" class="send-btn">Send Reservation</button>

      <p id="form-message" role="alert" style="display:none;"></p>
      <p id="form-error" role="alert" style="display:none;"></p>
    </form>
  </div>
</div>

<footer class="container footer">
  <div>© Ricardo Sanjines - Robotics Lab</div>
  <div><a href="attributions.html">Attributions</a> · <a href="#">Demo video (link)</a></div>
</footer>

<script>
  const modal = document.getElementById('modal-backdrop');
  const modalText = document.getElementById('modal-text');
  const modalCloseBtn = document.getElementById('modal-close');
  const reserveBtnModal = document.getElementById('modal-reserve-btn');
  const reservationForm = document.getElementById('reservation-form');
  const formMessage = document.getElementById('form-message');
  const formError = document.getElementById('form-error');
  const modalTitle = document.getElementById('modal-title');

  let currentProductName = '';

  // Show modal with info
  document.querySelectorAll('.info-btn').forEach(button => {
    button.addEventListener('click', (e) => {
      const card = e.target.closest('.card');
      const info = card.getAttribute('data-info') || 'No additional information available.';
      currentProductName = card.getAttribute('data-name') || 'Product';
      modalText.textContent = info;
      modalTitle.textContent = currentProductName;
      reservationForm.style.display = 'none'; // Hide form initially
      formMessage.style.display = 'none';
      formError.style.display = 'none';
      modalReserveBtn.style.display = 'inline-block'; // Show Reserve button
      modal.style.display = 'flex';
      modal.setAttribute('aria-hidden', 'false');
    });
  });

  // Show reservation form on Reserve button click
  reserveBtnModal.addEventListener('click', () => {
    modalReserveBtn.style.display = 'none';
    reservationForm.style.display = 'block';
    formMessage.style.display = 'none';
    formError.style.display = 'none';
  });

  // Close modal
  modalCloseBtn.addEventListener('click', closeModal);
  modal.addEventListener('click', (e) => {
    if (e.target === modal) closeModal();
  });

  function closeModal() {
    modal.style.display = 'none';
    modal.setAttribute('aria-hidden', 'true');
    reservationForm.reset();
    reservationForm.style.display = 'none';
    formMessage.style.display = 'none';
    formError.style.display = 'none';
    modalReserveBtn.style.display = 'inline-block';
  }

  // Form submission handling
  reservationForm.addEventListener('submit', (e) => {
    e.preventDefault();

    formMessage.style.display = 'none';
    formError.style.display = 'none';

    // Basic validation
    const name = reservationForm.name.value.trim();
    const email = reservationForm.email.value.trim();

    if (!name || !email) {
      formError.textContent = 'Please fill in the required fields: Name and Email.';
      formError.style.display = 'block';
      return;
    }

    // Simple email format validation
    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailPattern.test(email)) {
      formError.textContent = 'Please enter a valid email address.';
      formError.style.display = 'block';
      return;
    }

    // Simulate sending reservation (replace with actual backend call if needed)
    formMessage.textContent = `Thank you, ${name}! Your reservation for "${currentProductName}" has been received. We will contact you shortly.`;
    formMessage.style.display = 'block';
    reservationForm.style.display = 'none';

    // Optionally, reset form after submission
    reservationForm.reset();
  });
</script>
</body>
</html>
